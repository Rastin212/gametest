<!DOCTYPE html>
<html lang="ru">
<head>
	<script src="https://telegram.org/js/telegram-web-app.js"></script>

    <meta charset="UTF-8">
    <title>–°—Ç—Ä–æ–∏—Ç–µ–ª—å –°–ª–æ–≤: –ü–æ–ª–Ω–∞—è –í–µ—Ä—Å–∏—è</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Arial', sans-serif;
            background-color: #f4f4f9;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            user-select: none;
        }

        #ui-header {
            height: 60px;
            background: #2c3e50;
            color: white;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            z-index: 100;
        }

        #score-board { 
            font-size: 24px; 
            font-weight: bold; 
            display: flex;
            gap: 30px;
        }

        .score-item {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .score-label { font-size: 12px; opacity: 0.9; }
        .score-value { font-size: 20px; font-weight: bold; }
        .legendary { color: #e74c3c; }
        .epic { color: #9b59b6; }

        .btn {
            background: #34495e;
            color: white;
            border: 1px solid #7f8c8d;
            padding: 8px 16px;
            cursor: pointer;
            font-size: 16px;
            margin-left: 10px;
            border-radius: 4px;
        }
        .btn:hover { background: #4e667e; }

        #game-container {
            display: flex;
            flex: 1;
            height: calc(100vh - 60px);
        }

        #hint-area {
            flex: 1;
            background: #ecf0f1;
            padding: 40px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            border-right: 2px solid #bdc3c7;
            text-align: center;
        }
        
        #hint-title {
            color: #7f8c8d;
            font-size: 18px;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        #hint-text {
            font-size: 28px;
            color: #2c3e50;
            font-weight: bold;
            line-height: 1.4;
        }

        #word-area {
            flex: 2;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
            background: white;
        }

        #current-word {
            font-size: 80px;
            font-weight: bold;
            letter-spacing: 10px;
            color: #333;
            transition: transform 0.2s;
            min-height: 100px;
            display: flex;
            align-items: center;
        }

        .missing-char {
            color: #e74c3c;
            border-bottom: 5px solid #e74c3c;
            display: inline-block;
            min-width: 50px;
            text-align: center;
            margin: 0 5px;
        }

        .epic-char {
            color: #9b59b6;
            border-bottom: 5px solid #9b59b6;
            background: rgba(155, 89, 182, 0.1);
            border-radius: 5px;
            padding: 2px 5px;
        }

        .shake { animation: shake 0.5s; }
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            50% { transform: translateX(10px); }
            75% { transform: translateX(-10px); }
            100% { transform: translateX(0); }
        }

        #skyscraper-area {
            flex: 1;
            background: #dcdde1;
            border-left: 2px solid #bdc3c7;
            padding: 20px;
            display: flex;
            flex-direction: column-reverse;
            align-items: center;
            overflow-y: auto;
            justify-content: flex-start;
        }

        .brick {
            width: 80%;
            padding: 15px;
            margin-top: 5px;
            background: #3498db;
            color: white;
            text-align: center;
            font-weight: bold;
            font-size: 18px;
            border-radius: 4px;
            border: 2px solid #2980b9;
            box-shadow: 2px 2px 5px rgba(0,0,0,0.1);
            animation: slideIn 0.3s ease-out;
            flex-shrink: 0;
        }

        .brick-legendary {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
            border-color: #c0392b;
            color: white;
            font-size: 20px;
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(231, 76, 60, 0.4);
        }

        .brick-epic {
            background: linear-gradient(45deg, #9b59b6, #8e44ad);
            border-color: #8e44ad;
            color: white;
            font-size: 22px;
            transform: scale(1.1);
            box-shadow: 0 8px 20px rgba(155, 89, 182, 0.5);
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }

        @keyframes slideIn {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(44, 62, 80, 0.95);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            color: white;
        }
        .hidden { display: none !important; }
        h1 { font-size: 48px; color: #f1c40f; margin-bottom: 20px; }
        p { font-size: 22px; max-width: 700px; text-align: center; margin-bottom: 40px; line-height: 1.6; }
        .big-btn {
            padding: 15px 50px;
            font-size: 28px;
            background: #f1c40f;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            color: #2c3e50;
            font-weight: bold;
            transition: transform 0.1s;
        }
        .big-btn:hover { transform: scale(1.05); }
    </style>
</head>
<body>

    <div id="ui-header">
        <div id="score-board">
            <div class="score-item">
                <div class="score-label">–û–±—ã—á–Ω—ã–µ</div>
                <div class="score-value" id="simple-score">0</div>
            </div>
            <div class="score-item">
                <div class="score-label">–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–µ</div>
                <div class="score-value legendary" id="legendary-score">0</div>
            </div>
            <div class="score-item">
                <div class="score-label">–≠–ø–∏—á–Ω—ã–µ</div>
                <div class="score-value epic" id="epic-score">0</div>
            </div>
        </div>
        <div>
            <button class="btn" onclick="game.showMenu()">–ú–µ–Ω—é</button>
        </div>
    </div>

    <div id="game-container">
        <div id="hint-area">
            <div id="hint-title">–ü–æ–¥—Å–∫–∞–∑–∫–∞</div>
            <div id="hint-text">...</div>
        </div>
        <div id="word-area">
            <div id="current-word"></div>
            <div style="margin-top: 30px; color: #7f8c8d; font-size: 20px;">
                <span id="input-hint">–ù–∞–∂–º–∏ –Ω—É–∂–Ω—É—é –±—É–∫–≤—É –Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–µ</span>
            </div>
        </div>
        <div id="skyscraper-area"></div>
    </div>

    <div id="menu-overlay" class="overlay">
        <h1>–°–¢–†–û–ò–¢–ï–õ–¨ –°–õ–û–í: –õ–ï–ì–ï–ù–î–´</h1>
        <p>
            üü§ 1 –ø—Ä–æ–ø—É—Å–∫ = –û–±—ã—á–Ω–æ–µ (10 –æ—á–∫–æ–≤)<br>
            üî¥ 1 –ø—Ä–æ–ø—É—Å–∫ = –õ–µ–≥–µ–Ω–¥–∞—Ä–Ω–æ–µ (20 –æ—á–∫–æ–≤)<br>
            üü£ 2 –ø—Ä–æ–ø—É—Å–∫–∞ = –≠–ø–∏—á–Ω–æ–µ (30 –æ—á–∫–æ–≤)<br>
            –°—Ç—Ä–æ–∏ —Å–∞–º—ã–π –≤—ã—Å–æ–∫–∏–π –Ω–µ–±–æ—Å–∫—Ä–µ–± –∏–∑ —Å–ª–æ–≤!
        </p>
        <button class="big-btn" onclick="game.startNewGame()">–ù–∞—á–∞—Ç—å —Å—Ç—Ä–æ–π–∫—É</button>
    </div>
	
<script>
    const dictionary = [
        // –ü–†–û–°–¢–´–ï –°–õ–û–í–ê
        { w: "–ö–û–¢", h: "–ú—É—Ä–ª—ã—á–µ—Ç", t: "simple" }, 
        { w: "–î–û–ú", h: "–ñ–∏–ª–∏—â–µ", t: "simple" }, 
        { w: "–õ–ï–°", h: "–î–µ—Ä–µ–≤—å—è", t: "simple" }, 
        { w: "–ú–Ø–ß", h: "–ò–≥—Ä–∞", t: "simple" }, 
        { w: "–°–£–ü", h: "–û–±–µ–¥", t: "simple" }, 
        { w: "–®–ê–†", h: "–í–æ–∑–¥—É—Ö", t: "simple" }, 
        { w: "–ù–û–°", h: "–î—ã—à–∏–º", t: "simple" }, 
        { w: "–†–û–¢", h: "–ï–¥–∏–º", t: "simple" }, 
        { w: "–°–ù–ï–ì", h: "–ó–∏–º–∞", t: "simple" }, 
        { w: "–°–¢–£–õ", h: "–°–∏–¥–∏–º", t: "simple" },
        { w: "–°–¢–û–õ", h: "–ï–¥–∏–º", t: "simple" }, 
        { w: "–ö–†–û–í–ê–¢–¨", h: "–°–ø–∏–º", t: "simple" }, 
        { w: "–õ–ê–ú–ü–ê", h: "–°–≤–µ—Ç", t: "simple" }, 
        { w: "–ß–ê–°–´", h: "–í—Ä–µ–º—è", t: "simple" }, 
        { w: "–ö–ù–ò–ì–ê", h: "–ß–∏—Ç–∞–µ–º", t: "simple" }, 
        { w: "–†–£–ß–ö–ê", h: "–ü–∏—à–µ–º", t: "simple" }, 
        { w: "–ö–ê–†–¢–ê", h: "–ò—â–µ–º —Å–æ–∫—Ä–æ–≤–∏—â–∞", t: "simple" }, 
        { w: "–Ø–ë–õ–û–ö–û", h: "–§—Ä—É–∫—Ç", t: "simple" }, 
        { w: "–•–õ–ï–ë", h: "–ï–¥–∞", t: "simple" }, 
        { w: "–ú–û–õ–û–ö–û", h: "–ù–∞–ø–∏—Ç–æ–∫", t: "simple" },
        { w: "–í–û–î–ê", h: "–ü—å–µ–º", t: "simple" }, 
        { w: "–°–û–õ–ù–¶–ï", h: "–°–≤–µ—Ç–∏—Ç", t: "simple" }, 
        { w: "–ù–ï–ë–û", h: "–ì–æ–ª—É–±–æ–µ", t: "simple" }, 
        { w: "–î–û–ñ–î–¨", h: "–ú–æ–∫—Ä–æ", t: "simple" }, 
        { w: "–í–ï–¢–ï–†", h: "–î—É–µ—Ç", t: "simple" }, 
        { w: "–û–ì–û–ù–¨", h: "–ì–æ—Ä–∏—Ç", t: "simple" },
        { w: "–î–ï–†–ï–í–û", h: "–í—ã—Å–æ–∫–æ–µ", t: "simple" }, 
        { w: "–¢–†–ê–í–ê", h: "–ó–µ–ª–µ–Ω–∞—è", t: "simple" }, 
        { w: "–¶–í–ï–¢", h: "–ö—Ä–∞—Å–∏–≤–æ", t: "simple" }, 
        { w: "–†–ï–ö–ê", h: "–¢–µ—á–µ—Ç", t: "simple" }, 
        { w: "–û–ó–ï–†–û", h: "–°–ø–æ–∫–æ–π–Ω–æ–µ –∏ —Å –≤–æ–¥–æ–π", t: "simple" }, 
        { w: "–ì–û–†–ê", h: "–í—ã—Å–æ–∫–∞—è –∏–∑ –∫–∞–º–Ω—è", t: "simple" },
        { w: "–ü–ï–°", h: "–õ–∞–µ—Ç", t: "simple" }, 
        { w: "–ö–û–ó–ê", h: "–° —Ä–æ–≥–∞–º–∏ –∏ –¥–∞–µ—Ç –º–æ–ª–æ–∫–æ", t: "simple" }, 
        { w: "–û–í–¶–ê", h: "–î–∞–µ—Ç –º–Ω–æ–≥–æ —à–µ—Ä—Å—Ç–∏", t: "simple" }, 
        { w: "–ö–£–†–ò–¶–ê", h: "–ö—É–¥–∞—Ö—á–µ—Ç", t: "simple" }, 
        { w: "–£–¢–ö–ê", h: "–ö—Ä—è–∫–∞–µ—Ç", t: "simple" }, 
        { w: "–ì–£–°–¨", h: "–ö—Ä—è–∫–∞–µ—Ç", t: "simple" },
        { w: "–ú–ê–ú–ê", h: "–ò–∑ —Ç–≤–æ–µ–π —Å–µ–º—å–∏", t: "simple" }, 
        { w: "–ü–ê–ü–ê", h: "–ò–∑ —Ç–≤–æ–µ–π —Å–µ–º—å–∏", t: "simple" }, 
        { w: "–ë–†–ê–¢", h: "–ò–∑ —Ç–≤–æ–µ–π —Å–µ–º—å–∏", t: "simple" }, 
        { w: "–°–ï–°–¢–†–ê", h: "–ò–∑ —Ç–≤–æ–µ–π —Å–µ–º—å–∏", t: "simple" }, 
        { w: "–î–†–£–ì", h: "–í–º–µ—Å—Ç–µ, —Å–∞–º—ã–π –ª—É—á—à–∏–π", t: "simple" }, 
        { w: "–®–ö–û–õ–ê", h: "–£—á–∏–º—Å—è", t: "simple" },
        { w: "–£–†–û–ö", h: "–ó–Ω–∞–Ω–∏—è", t: "simple" }, 
        { w: "–î–û–°–ö–ê", h: "–ü–∏—à–µ–º", t: "simple" }, 
        { w: "–ü–ê–†–¢–ê", h: "–°–∏–¥–∏–º", t: "simple" }, 
        { w: "–¢–ï–¢–†–ê–î–¨", h: "–ü–∏—à–µ–º", t: "simple" }, 
        { w: "–ú–ï–®–û–ö", h: "–î–ª—è —Å–º–µ–Ω–∫–∏", t: "simple" }, 
        { w: "–ò–ì–†–£–®–ö–ê", h: "–ò–≥—Ä–∞–µ–º", t: "simple" }, 
        { w: "–ö–£–ö–õ–ê", h: "–î–µ–≤–æ—á–∫–∏ –∏–≥—Ä–∞—é—Ç", t: "simple" }, 
        { w: "–ú–ê–®–ò–ù–ö–ê", h: "–ú–∞–ª—å—á–∏–∫–∏ –∏–≥—Ä–∞—é—Ç", t: "simple" },

        // –õ–ï–ì–ï–ù–î–ê–†–ù–´–ï –°–õ–û–í–ê
        { w: "–°–õ–û–ù", h: "–û–≥—Ä–æ–º–Ω—ã–π", t: "legendary" }, 
        { w: "–¢–ò–ì–†", h: "–ü–æ–ª–æ—Å–∞—Ç—ã–π", t: "legendary" }, 
        { w: "–ú–ï–î–í–ï–î–¨", h: "–õ–µ—Å–Ω–æ–π —Ö–æ–∑—è–∏–Ω", t: "legendary" }, 
        { w: "–ñ–ò–†–ê–§", h: "–î–ª–∏–Ω–Ω–∞—è —à–µ—è", t: "legendary" }, 
        { w: "–õ–ï–í", h: "–¶–∞—Ä—å –∑–≤–µ—Ä–µ–π", t: "legendary" }, 
        { w: "–í–û–õ–ö", h: "–°–µ—Ä—ã–π —Ö–∏—â–Ω–∏–∫", t: "legendary" }, 
        { w: "–õ–ò–°–ê", h: "–•–∏—Ç—Ä–∞—è", t: "legendary" }, 
        { w: "–ó–ê–Ø–¶", h: "–ü—Ä—ã–≥–∞–µ—Ç", t: "legendary" },
        { w: "–ï–ù–û–¢", h: "–ú–∞—Å–∫–∞ –Ω–∞ –º–æ—Ä–¥–∞—à–∫–µ –∏ —Ö–∏—Ç—Ä—ã–π", t: "legendary" }, 
        { w: "–û–ë–ï–ó–¨–Ø–ù–ê", h: "–õ—é–±–∏—Ç –±–∞–Ω–∞–Ω—ã", t: "legendary" },
        { w: "–ü–ò–ù–ì–í–ò–ù", h: "–•–æ–¥–∏—Ç –ø—Ä—è–º–æ", t: "legendary" }, 
        { w: "–î–ï–õ–¨–§–ò–ù", h: "–£–º–Ω—ã–π", t: "legendary" }, 
        { w: "–ö–ò–¢", h: "–û–≥—Ä–æ–º–Ω—ã–π –≤ –æ–∫–µ–∞–Ω–µ", t: "legendary" }, 
        { w: "–ê–ö–£–õ–ê", h: "–°—Ç—Ä–∞—à–Ω–∞—è —Ä—ã–±–∞", t: "legendary" }, 
        { w: "–ö–†–û–ö–û–î–ò–õ", h: "–ó—É–±–∞—Å—Ç—ã–π –∏ –∑–µ–ª–µ–Ω—ã–π", t: "legendary" }, 
        { w: "–ü–û–ü–£–ì–ê–ô", h: "–ì–æ–≤–æ—Ä–∏—Ç –∏ –ø—Ç–∏—Ü–∞", t: "legendary" },
        { w: "–°–û–ë–ê–ö–ê", h: "–í–µ—Ä–Ω—ã–π –¥—Ä—É–≥", t: "legendary" }, 
        { w: "–ö–û–®–ö–ê", h: "–ú—É—Ä–ª—ã—á–µ—Ç", t: "legendary" }, 
        { w: "–õ–û–®–ê–î–¨", h: "–°–∫–∞—á–µ—Ç", t: "legendary" }, 
        { w: "–ö–û–†–û–í–ê", h: "–ú—É-–º—É", t: "legendary" },
        { w: "–°–í–ò–ù–¨–Ø", h: "–•—Ä—é-—Ö—Ä—é", t: "legendary" }, 
        { w: "–ö–£–†–ò–¶–ê", h: "–ö—É–¥–∞—Ö—á–µ—Ç", t: "legendary" }, 
        { w: "–ì–†–û–ú", h: "–ì—Ä–æ–º–∫–æ –≤ –≥—Ä–æ–∑—É", t: "legendary" }, 
        { w: "–ú–û–õ–ù–ò–Ø", h: "–°–∏—è–µ—Ç –≤ –≥—Ä–æ–∑—É", t: "legendary" }, 
        { w: "–†–ê–î–£–ì–ê", h: "–°–µ–º—å —Ü–≤–µ—Ç–æ–≤", t: "legendary" }, 
        { w: "–ó–í–ï–ó–î–ê", h: "–°–≤–µ—Ç–∏—Ç –Ω–æ—á—å—é", t: "legendary" },
        { w: "–õ–£–ù–ê", h: "–ù–æ—á—å—é —Å–≤–µ—Ç–∏—Ç", t: "legendary" }, 
        { w: "–°–û–õ–ù–¶–ï", h: "–î–Ω–µ–º —Å–≤–µ—Ç–∏—Ç", t: "legendary" }, 
        { w: "–û–ë–õ–ê–ö–û", h: "–ü–ª—ã–≤—É—Ç", t: "legendary" }, 
        { w: "–¢–£–ß–ê", h: "–î–æ–∂–¥—å", t: "legendary" }, 
        { w: "–ú–ï–ß–¢–ê", h: "–•–æ—á—É", t: "legendary" }, 
        { w: "–°–ß–ê–°–¢–¨–ï", h: "–£–ª—ã–±–∫–∞", t: "legendary" },
        { w: "–î–†–£–ñ–ë–ê", h: "–ù–∞–≤—Å–µ–≥–¥–∞", t: "legendary" }, 
        { w: "–°–ï–ú–¨–Ø", h: "–õ—é–±–æ–≤—å", t: "legendary" }, 
        { w: "–ë–ê–ë–£–®–ö–ê", h: "–ü–∏—Ä–æ–∂–∫–∏", t: "legendary" }, 
        { w: "–î–ï–î–£–®–ö–ê", h: "–°–∫–∞–∑–∫–∏", t: "legendary" }, 
        { w: "–ü–û–ë–ï–î–ê", h: "–£—Ä–∞!", t: "legendary" }, 
        { w: "–ß–ï–ú–ü–ò–û–ù", h: "–ü–µ—Ä–≤—ã–π", t: "legendary" }, 
        { w: "–ì–ï–†–û–ô", h: "–°–ø–∞—Å–∞–µ—Ç", t: "legendary" }, 
        { w: "–ü–†–ò–ù–¶", h: "–ö–æ—Ä–æ–ª–µ–≤—Å–∫–∏–π", t: "legendary" },

        // –≠–ü–ò–ß–ù–´–ï –°–õ–û–í–ê (2 –ø—Ä–æ–ø—É—Å–∫–∞)
        { w: "–õ–ï–¢–ß–ò–ö", h: "–°–∞–º–æ–ª–µ—Ç –≤–æ–¥–∏—Ç", missingChars: ['–µ','—á'], missingPositions: [1,3] },
        { w: "–ö–û–°–ú–û–ù–ê–í–¢", h: "–ö –∑–≤–µ–∑–¥–∞–º", missingChars: ['—Å','–æ'], missingPositions: [2,4] },
        { w: "–ü–û–ß–¢–ê–õ–¨–û–ù", h: "–ü–∏—Å—å–º–∞ –Ω–æ—Å–∏—Ç", missingChars: ['—á','–ª'], missingPositions: [2,5] },
        { w: "–°–¢–†–û–ò–¢–ï–õ–¨", h: "–î–æ–º–∞ —Å—Ç—Ä–æ–∏—Ç", missingChars: ['—Ç','–æ'], missingPositions: [1,3] },
        { w: "–í–û–î–ò–¢–ï–õ–¨", h: "–ú–∞—à–∏–Ω—ã –≤–æ–¥–∏—Ç", missingChars: ['–æ','–∏'], missingPositions: [1,3] },
        { w: "–£–ß–ò–¢–ï–õ–¨", h: "–í —à–∫–æ–ª–µ —É—á–∏—Ç", missingChars: ['—á','—Ç'], missingPositions: [1,3] },
        { w: "–í–û–õ–®–ï–ë–ù–ò–ö", h: "–ß—É–¥–µ—Å–∞ –¥–µ–ª–∞–µ—Ç", missingChars: ['–æ','—à'], missingPositions: [1,3] },
        { w: "–ü–†–û–§–ï–°–°–û–†", h: "–£—á–µ–Ω—ã–π –≤ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏–∏", missingChars: ['—Ä','—Ñ'], missingPositions: [1,3] },
        { w: "–ü–†–ï–ó–ò–î–ï–ù–¢", h: "–ì–ª–∞–≤–Ω—ã–π –≤ —Å—Ç—Ä–∞–Ω–µ", missingChars: ['—Ä','–∑'], missingPositions: [1,3] },
        { w: "–ü–†–ò–ù–¶–ï–°–°–ê", h: "–í –∑–∞–º–∫–µ –∂–∏–≤–µ—Ç", missingChars: ['—Ä','–Ω'], missingPositions: [1,3] },
        { w: "–î–ï–ù–¨–†–û–ñ–î–ï–ù–ò–ï", h: "–î–µ–Ω—å –¥–ª—è –µ–¥—ã —Ç–æ—Ä—Ç–∏–∫–æ–≤", missingChars: ['–Ω','—Ä'], missingPositions: [2,4] },
        { w: "–ö–ê–ù–ò–ö–£–õ–´", h: "–û—Ç–¥—ã—Ö –ª–µ—Ç–æ–º", missingChars: ['–Ω','–ª'], missingPositions: [2,6] },
        { w: "–ó–û–û–ü–ê–†–ö", h: "–ñ–∏–≤–æ—Ç–Ω—ã–µ –≤ –≥–æ—Ä–æ–¥–µ", missingChars: ['–æ','–∞'], missingPositions: [1,4] },
        { w: "–ö–û–ù–°–¢–†–£–ö–¢–û–†", h: "–°–æ–±–∏—Ä–∞–µ–º", missingChars: ['–Ω','—Ä'], missingPositions: [2,5] },
        { w: "–ü–õ–ê–ù–ï–¢–ê", h: "–ó–µ–º–ª—è –Ω–∞—à–∞...", missingChars: ['–ª','–Ω'], missingPositions: [1,3] },
        { w: "–ì–ê–õ–ê–ö–¢–ò–ö–ê", h: "–ó–≤–µ–∑–¥—ã –≤ –∫–æ—Å–º–æ—Å–µ", missingChars: ['–∞','–∫'], missingPositions: [1,4] },
        { w: "–¢–ï–õ–ï–§–û–ù", h: "–ó–≤–æ–Ω–∏–º", missingChars: ['–µ','–æ'], missingPositions: [1,5] },
        { w: "–ö–û–ú–ü–¨–Æ–¢–ï–†", h: "–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä—É–µ–º –Ω–∞ –Ω–µ–º", missingChars: ['–º','—å'], missingPositions: [2,4] },
        { w: "–ú–£–õ–¨–¢–ò–ö–ò", h: "–°–º–µ—à–Ω—ã–µ —Å–º–æ—Ç—Ä–∏–º", missingChars: ['–ª','—Ç'], missingPositions: [2,4] },
        { w: "–ü–†–ò–ö–õ–Æ–ß–ï–ù–ò–ï", h: "–ü–æ–∏—Å–∫ –∫–ª–∞–¥–∞", missingChars: ['–∫','—á'], missingPositions: [3,6] },
        { w: "–û–¢–ö–†–´–¢–ò–ï", h: "–ù–æ–≤–æ–µ –≤ –Ω–∞—É–∫–µ", missingChars: ['—Ç','—Ç'], missingPositions: [1,5] },
        { w: "–ò–ó–û–ë–†–ï–¢–ï–ù–ò–ï", h: "–ù–æ–≤–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ", missingChars: ['–∑','—Ä'], missingPositions: [1,4] },
        { w: "–ü–û–õ–ò–¶–ï–ô–°–ö–ê–Ø", h: "–ó–∞—â–∏—â–∞–µ—Ç –ª—é–¥–µ–π", missingChars: ['—Ü','—Å'], missingPositions: [4,7] },
        { w: "–ü–û–ñ–ê–†–ù–´–ô", h: "–ì–∞—Å–∏—Ç –æ–≥–æ–Ω—å", missingChars: ['–∞','–Ω'], missingPositions: [3,5] },
        { w: "–°–ü–ê–°–ê–¢–ï–õ–¨", h: "–°–ø–∞—Å–∞–µ—Ç –ª—é–¥–µ–π", missingChars: ['–∞','—Ç'], missingPositions: [2,5] },
        { w: "–ò–°–ö–õ–Æ–ß–ï–ù–ò–ï", h: "–û—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –ø—Ä–∞–≤–∏–ª", missingChars: ['–∫','—á'], missingPositions: [2,5] },
        { w: "–ü–†–û–ì–†–ê–ú–ú–ò–°–¢", h: "–ü—Ä–æ–≥—Ä–∞–º–º—ã –ø–∏—à–µ—Ç", missingChars: ['—Ä','–º'], missingPositions: [1,6] },
        { w: "–ú–ê–¢–ï–ú–ê–¢–ò–ö–ê", h: "–ù–∞—É–∫–∞ –æ —á–∏—Å–ª–∞—Ö", missingChars: ['—Ç','–º'], missingPositions: [2,4] },
        { w: "–§–ò–ó–ö–£–õ–¨–¢–£–†–ê", h: "–£—Ä–æ–∫ –≥–¥–µ –±–µ–≥–∞–µ–º", missingChars: ['–∑','–ª'], missingPositions: [2,5] },
        { w: "–†–ò–°–û–í–ê–ù–ò–ï", h: "–£—Ä–æ–∫ –≥–¥–µ —Ä–∏—Å—É–µ–º", missingChars: ['—Å','–Ω'], missingPositions: [2,6] },
        { w: "–ú–£–ó–´–ö–ê", h: "–ü–µ—Å–Ω–∏", missingChars: ['–∑','–∫'], missingPositions: [2,4] },
        { w: "–¢–ê–ù–¶–´", h: "–î–≤–∏–≥–∞–µ–º—Å—è", missingChars: ['–Ω','—Ü'], missingPositions: [1,3] },
        { w: "–°–ü–û–†–¢", h: "–°–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏—è", missingChars: ['–ø','—Ä'], missingPositions: [1,3] },
        { w: "–ß–ï–ú–ü–ò–û–ù", h: "–ü–æ–±–µ–¥–∏—Ç–µ–ª—å", missingChars: ['–µ','–ø'], missingPositions: [1,3] },
        { w: "–¢–†–ï–ù–ò–†–û–í–ö–ê", h: "–°–ø–æ—Ä—Ç–∏–≤–Ω—ã–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è", missingChars: ['–µ','–≤'], missingPositions: [2,7] },
        { w: "–°–¢–ê–î–ò–û–ù", h: "–ü–æ–ª–µ –¥–ª—è —Å–ø–æ—Ä—Ç–∞", missingChars: ['—Ç','–¥'], missingPositions: [1,3] }
    ];

    class Game {
        constructor() {
            this.simpleCount = 0;
            this.legendaryCount = 0;
            this.epicCount = 0;
            this.currentTask = null;
            this.isRunning = false;
            this.epicCharIndex = 0;

            this.inputHintEl = document.getElementById('input-hint');
            this.hintEl = document.getElementById('hint-text');
            this.wordEl = document.getElementById('current-word');
            this.simpleScoreEl = document.getElementById('simple-score');
            this.legendaryScoreEl = document.getElementById('legendary-score');
            this.epicScoreEl = document.getElementById('epic-score');
            this.skyscraperEl = document.getElementById('skyscraper-area');
            this.menuOverlay = document.getElementById('menu-overlay');

            document.addEventListener('keydown', (e) => this.handleInput(e));
        }

        startNewGame() {
            this.simpleCount = 0;
            this.legendaryCount = 0;
            this.epicCount = 0;
            this.updateScores();
            this.skyscraperEl.innerHTML = '';
            this.isRunning = true;
            this.menuOverlay.classList.add('hidden');
            this.nextWord();
        }

        showMenu() {
            this.isRunning = false;
            this.menuOverlay.classList.remove('hidden');
        }

        nextWord() {
            const item = dictionary[Math.floor(Math.random() * dictionary.length)];
            this.epicCharIndex = 0;

            if (item.missingChars) {
                this.currentTask = {
                    fullWord: item.w,
                    hint: item.h,
                    type: "epic",
                    missingChars: item.missingChars,
                    missingPositions: item.missingPositions
                };
            } else {
                const index = Math.floor(Math.random() * item.w.length);
                this.currentTask = {
                    fullWord: item.w,
                    hint: item.h,
                    type: item.t,
                    missingChar: item.w[index].toLowerCase(),
                    missingIndex: index
                };
            }

            this.renderTask();
        }

        renderTask() {
            this.hintEl.innerText = this.currentTask.hint;
            this.wordEl.classList.remove('shake');

            if (this.currentTask.type === "epic" && this.currentTask.missingChars) {
                const idx0 = this.currentTask.missingPositions[0];
                const idx1 = this.currentTask.missingPositions[1];
                let displayWord = "";

                for (let i = 0; i < this.currentTask.fullWord.length; i++) {
                    if (i === idx0) {
                        if (this.epicCharIndex > 0) {
                            displayWord += `<span class="missing-char epic-char">${this.currentTask.missingChars[0].toUpperCase()}</span>`;
                        } else {
                            displayWord += `<span class="missing-char epic-char">_</span>`;
                        }
                    } else if (i === idx1) {
                        displayWord += `<span class="missing-char epic-char">_</span>`;
                    } else {
                        displayWord += this.currentTask.fullWord[i];
                    }
                }

                this.wordEl.innerHTML = displayWord;
                this.inputHintEl.innerText = `–í–≤–µ–¥–∏ ${this.epicCharIndex + 1}-—é –±—É–∫–≤—É`;
            } else {
                const prefix = this.currentTask.fullWord.substring(0, this.currentTask.missingIndex);
                const suffix = this.currentTask.fullWord.substring(this.currentTask.missingIndex + 1);
                this.wordEl.innerHTML = `${prefix}<span class="missing-char">_</span>${suffix}`;
                this.inputHintEl.innerText = "–ù–∞–∂–º–∏ –Ω—É–∂–Ω—É—é –±—É–∫–≤—É –Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–µ";
            }
        }

        handleInput(e) {
            if (!this.isRunning) return;
            const key = e.key.toLowerCase();
            if (!/[–∞-—è—ë]/.test(key)) return;

            let correct = false;

            if (this.currentTask.type === "epic" && this.currentTask.missingChars) {
                const expectedChar = this.currentTask.missingChars[this.epicCharIndex];
                if (key === expectedChar) {
                    correct = true;
                    this.epicCharIndex++;
                    if (this.epicCharIndex === 1) {
                        this.renderTask();
                    } else {
                        this.epicSuccess();
                    }
                }
            } else {
                if (key === this.currentTask.missingChar) {
                    correct = true;
                    this.success();
                }
            }

            if (!correct) {
                this.fail();
            }
        }

        epicSuccess() {
            this.wordEl.innerHTML = this.currentTask.fullWord;
            this.wordEl.style.color = "#9b59b6";
            this.epicCount++;
            this.updateScores();
            this.addBrick(this.currentTask.fullWord, "epic");
            setTimeout(() => {
                this.wordEl.style.color = "#333";
                this.nextWord();
            }, 1200);
        }

        success() {
            this.wordEl.innerHTML = this.wordEl.textContent.replace('_', this.currentTask.missingChar.toUpperCase());
            this.wordEl.style.color = this.currentTask.type === "legendary" ? "#e74c3c" : "#27ae60";

            if (this.currentTask.type === "simple") {
                this.simpleCount++;
            } else if (this.currentTask.type === "legendary") {
                this.legendaryCount++;
            }

            this.updateScores();
            this.addBrick(this.currentTask.fullWord, this.currentTask.type);
            setTimeout(() => {
                this.wordEl.style.color = "#333";
                this.nextWord();
            }, 800);
        }

        fail() {
            this.wordEl.classList.add('shake');
            setTimeout(() => this.wordEl.classList.remove('shake'), 500);
        }

        updateScores() {
            this.simpleScoreEl.innerText = this.simpleCount;
            this.legendaryScoreEl.innerText = this.legendaryCount;
            this.epicScoreEl.innerText = this.epicCount;
        }

        addBrick(wordText, type) {
            const brick = document.createElement('div');
            brick.className = `brick ${type === 'legendary' ? 'brick-legendary' : type === 'epic' ? 'brick-epic' : ''}`;
            brick.innerText = wordText;
            this.skyscraperEl.appendChild(brick);
            this.skyscraperEl.scrollTop = this.skyscraperEl.scrollHeight;
        }
    }

    const game = new Game();
</script>

<script>
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    let tg = window.Telegram.WebApp;
    tg.expand(); // –†–∞—Å—à–∏—Ä–∏—Ç—å –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω

</script>


</body>
</html>
