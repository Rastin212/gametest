<!DOCTYPE html>
<html>
<head>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { 
            margin: 0; 
            padding: 20px; 
            background: var(--tg-theme-bg-color);
            color: var(--tg-theme-text-color);
            font-family: -apple-system, sans-serif;
        }
        .nft-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); 
            gap: 15px; 
        }
        .nft-card { 
            border: 1px solid var(--tg-theme-hint-color); 
            border-radius: 12px; 
            padding: 10px; 
            text-align: center; 
        }
        .nft-image { 
            width: 100%; 
            height: 120px; 
            object-fit: cover; 
            border-radius: 8px; 
        }
        .wallet-input {
            width: 100%; margin: 10px 0; padding: 12px;
            border: 1px solid var(--tg-theme-hint-color);
            border-radius: 8px; background: var(--tg-theme-secondary-bg-color);
            color: var(--tg-theme-text-color);
        }
    </style>
</head>
<body>
    <h1>üé® –ú–æ–∏ NFT</h1>
    <input type="text" id="wallet-input" class="wallet-input" placeholder="–í—Å—Ç–∞–≤—å—Ç–µ –∞–¥—Ä–µ—Å TON –∫–æ—à–µ–ª—å–∫–∞ (EQ... –∏–ª–∏ UQ...)">
    <button onclick="loadNFTs()" style="width: 100%; padding: 12px; margin: 10px 0; background: var(--tg-theme-button-color); color: var(--tg-theme-button-text-color); border: none; border-radius: 8px; font-weight: bold;">üîç –ó–∞–≥—Ä—É–∑–∏—Ç—å NFT</button>
    <div id="nft-grid" class="nft-grid">
        <p>–í–≤–µ–¥–∏—Ç–µ –∞–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞ –∏ –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É</p>
    </div>

    <script>
        let tg = window.Telegram.WebApp;
        tg.expand();

        // –¢–µ—Å—Ç–æ–≤—ã–µ NFT –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)
        const testNFTs = [
            { name: "–ö–æ—Å–º–∏—á–µ—Å–∫–∏–π –ö–æ—Ç #123", image: "https://via.placeholder.com/150x120/2cab37/ffffff?text=üê±NFT", address: "EQ..." },
            { name: "–ó–æ–ª–æ—Ç–æ–π –ü–∞–Ω–¥–∞ #456", image: "https://via.placeholder.com/150x120/0088cc/ffffff?text=üêºNFT", address: "UQ..." },
            { name: "–†–µ–¥–∫–∏–π –î—Ä–∞–∫–æ–Ω #789", image: "https://via.placeholder.com/150x120/ff6b35/ffffff?text=üê≤NFT", address: "EQ..." }
        ];

        async function loadNFTs() {
            const walletInput = document.getElementById('wallet-input');
            const walletAddress = walletInput.value.trim();
            const grid = document.getElementById('nft-grid');
            
            if (!walletAddress) {
                grid.innerHTML = '<p style="color: var(--tg-theme-hint-color);">‚ö†Ô∏è –í–≤–µ–¥–∏—Ç–µ –∞–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞</p>';
                return;
            }
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ TON –∞–¥—Ä–µ—Å–∞ (–Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å EQ/UQ)
            if (!walletAddress.match(/^EQ[A-Za-z0-9_-]{44,}$/) && !walletAddress.match(/^UQ[A-Za-z0-9_-]{44,}$/)) {
                grid.innerHTML = '<p style="color: #ff6b35;">‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∞–¥—Ä–µ—Å–∞ TON</p><p style="font-size: 12px; opacity: 0.7;">–î–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å EQ... –∏–ª–∏ UQ...</p>';
                return;
            }

            grid.innerHTML = '<p>üîÑ –ó–∞–≥—Ä—É–∑–∫–∞ NFT –∏–∑ –∫–æ—à–µ–ª—å–∫–∞...</p>';

            try {
                // –ü–æ–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–µ–º–æ + –ø—ã—Ç–∞–µ–º—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ
                showDemoNFTs(walletAddress);
                
                // –†–µ–∞–ª—å–Ω—ã–π API (—Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏ –¥–ª—è –æ–±—Ö–æ–¥–∞ CORS)
                const proxyUrl = 'https://api.allorigins.win/raw?url=' + encodeURIComponent(`https://tonapi.io/v2/accounts/${walletAddress}/jettons`);
                const response = await fetch(proxyUrl);
                const data = await response.json();
                
                console.log('TON API –æ—Ç–≤–µ—Ç:', data);
            } catch (error) {
                console.error('API –æ—à–∏–±–∫–∞:', error);
                // –û—Å—Ç–∞–≤–ª—è–µ–º –¥–µ–º–æ-NFT, –µ—Å–ª–∏ API –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
            }
        }

        function showDemoNFTs(wallet) {
            const grid = document.getElementById('nft-grid');
            grid.innerHTML = `
                <div style="text-align: center; padding: 20px; color: var(--tg-theme-hint-color);">
                    <p>üì± –î–µ–º–æ NFT –∫–æ—à–µ–ª—å–∫–∞:</p>
                    <p style="font-size: 12px; opacity: 0.7;">${wallet.slice(0,8)}... (${wallet.slice(-4)})</p>
                </div>
            `;
            
            testNFTs.forEach((nft, index) => {
                const card = document.createElement('div');
                card.className = 'nft-card';
                card.innerHTML = `
                    <img class="nft-image" src="${nft.image}" alt="${nft.name}" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                    <div style="display: none; width: 100%; height: 120px; background: linear-gradient(45deg, #2cab37, #0088cc); border-radius: 8px; align-items: center; justify-content: center; color: white; font-weight: bold;">
                        NFT #${index + 1}
                    </div>
                    <div style="font-size: 14px; margin-top: 8px;">${nft.name}</div>
                    <div style="font-size: 12px; opacity: 0.7;">${nft.address}</div>
                `;
                grid.appendChild(card);
            });
        }

        // –ê–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ (–ø–æ–∫–∞–∂–µ—Ç –¥–µ–º–æ)
        setTimeout(() => document.getElementById('wallet-input').focus(), 500);
    </script>
</body>
</html>
